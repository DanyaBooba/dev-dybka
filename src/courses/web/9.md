---
prev: "8"
next: "10"
---

# 9. Теги. Урон. Пополнение здоровья

В данном уроке мы завершим работу над обработкой касаний, добавим пополнение здоровья и добавим теги на объекты.

## Обработка касаний

Немного изменим обработку касаний игрока с объектами. Сейчас мы только выводим тег объекта, с которым касаемся. Теперь вместо вывода мы поставим данный блок кода: «if (collision.gameObject.CompareTag("Enemy")) health.Damage(damage);».

С его помощью при касании игрока с врагом мы вызовем метод, который обработает урон.

## Тег на врага

Теперь добавим тег, отвечающий за врага. Перейдем в сцену. Выберем нашего игрока. И в поле Инспектора выберем поле «Tag» сверху. Нажмем на «Untagged», выберем «Add Tag…». Нажмем на плюс, добавим новый тег: «Enemy». Теперь заново выберем врага и дадим ему наш новый тег.

Теперь у врага есть тег, и мы можем обработать с ним касание. Запустим игру. При касании игрока с врагом мы будем получать урон. Наш уровень здоровья будет уменьшаться. Отследить здоровье мы можем в окне Консоли.

## Тег для здоровья

Теперь обработаем получение здоровья. Добавим еще один тег: «Eat». Добавим данный тег на объект «Eat».

И пока мы находимся в объекте «Eat», нам нужно перейти к компоненту «Circle Collider 2D». Нам нужно активировать поле «Is Trigger» для того, чтобы мы могли обрабатывать касание с объектом и, при этом, мы бы проходили сквозь объект.

## Обработка касания с едой

Перейдем к обработке касание с нашим объектом «Eat». Откроем скрипт «PlayerTouch».

Первое, что я хочу сделать: изменить название поля «damage» на «valuechange». Изменим упоминание данного поля на новое название. Изменение связано с тем, что на это же значение мы будем убавлять и прибавлять здоровье.

Далее — добавим обработку касание с триггером.

```C#
private void OnTriggerEnter2D(Collider2D collider)
{
    if(collider.gameObject.CompareTag("Eat")) health.Eat(valuechange);
}
```

Мы добавили условие обработки касания с объектом еды. Сейчас логика работы будет следующая: мы коснемся еды, получим здоровье, но объект останется. Давайте сделаем так, чтобы объект пропадал при касании.

```C#
private void OnTriggerEnter2D(Collider2D collider)
{
    if(collider.gameObject.CompareTag("Eat"))
    {
        health.Eat(valuechange);
        Destroy(collider.gameObject);
    }
}
```

Теперь при касании мы будем уничтожать наш объект. Осталось добавить метод Eat() для скрипта «PlayerHealth».

```C#
public void Eat(float eat)
{
    ChangeHealth(eat);
}
```

Теперь мы можем не только получать урон, но и пополнять здоровье. Игра теперь работает абсолютно правильно.

Отлично!
